<%- include('./partials/header.ejs') %>
<script type="text/javascript">
    google.charts.load('current', {'packages':['corechart']});
    google.charts.setOnLoadCallback(drawChart);
    google.charts.setOnLoadCallback(drawChart2);

    function drawChart() {
        // Create the data table.
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Verdict');
        data.addColumn('number', 'Count');
        data.addRows([
            ['Correct', <%= Right %>],
            ['Incorrect', <%= Wrong %>],
            ['NA', <%= NA %>]
        ]);

        // Set chart options
        var options = {
            'title': 'Answer Mode',
            'width': 400,
            'height': 400,
            'titleTextStyle': {fontSize: 18, bold: true},
            'backgroundColor': getBackgroundColor(), // Dynamic background color
            'legendTextStyle': {color: getTextColor()}, // Dynamic text color for legend
            'pieSliceTextStyle': {color: getTextColor()}, // Dynamic text color for pie slices
            'titleTextStyle': {color: getTextColor()}, // Dynamic text color for title
            'colors': ['#4CAF50', '#F44336', '#FFC107'], // Colors for slices
            'animation': {
                'startup': true,
                'duration': 1000,
                'easing': 'out'
            },
        };

        // Instantiate and draw our chart, passing in some options.
        var chart = new google.visualization.PieChart(document.getElementById('charts_div'));
        chart.draw(data, options);
    }

    function drawChart2() {
        // Create the data table.
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Verdict');
        data.addColumn('number', 'Count');
        data.addRows([
            ['Correct', <%= Right_meta %>],
            ['Incorrect', <%= Wrong_meta %>],
            ['NA', <%= NA_meta %>]
        ]);

        // Set chart options
        var options = {
            'title': 'Metacognition Mode',
            'width': 400,
            'height': 400,
            'titleTextStyle': {fontSize: 18, bold: true},
            'backgroundColor': getBackgroundColor(), // Dynamic background color
            'legendTextStyle': {color: getTextColor()}, // Dynamic text color for legend
            'pieSliceTextStyle': {color: getTextColor()}, // Dynamic text color for pie slices
            'titleTextStyle': {color: getTextColor()}, // Dynamic text color for title
            'colors': ['#4CAF50', '#F44336', '#FFC107'], // Colors for slices
            'animation': {
                'startup': true,
                'duration': 1000,
                'easing': 'out'
            },
        };

        // Instantiate and draw our chart, passing in some options.
        var chart = new google.visualization.PieChart(document.getElementById('charts_div2'));
        chart.draw(data, options);
    }

    // Function to get dynamic background color based on switch__input status
    function getBackgroundColor() {
        return '#1c2131'; // Dark or light background color
    }

    // Function to get dynamic text color based on switch__input status
    function getTextColor() {
        return '#fff'; // Light or dark text color
    }








    //medals section


    
</script>

</head>
<body>

<section class="d-flex flex-column align-items-stretch">
    <!-- Include the sidebar -->
    <%- include("./partials/side_navbar.ejs") %>
    <%- include('./partials/switch.ejs') %>
    
    <%- include("./partials/dashboard_navbar.ejs") %>

        <!-- Main content -->
        <div class="container mb-4">
            <div class="row">
                <p>Track the total number of questions attempted and answered correctly across Answer Mode and Metacognition Mode.</p>
                <div class="col-md-9">
                    <!-- Track total questions attempted -->
                    <!-- Pie chart for Answer Mode -->
                    <div class="chartwrapper">
                    <div id="charts_div" ></div>
                    <div id="charts_div2"></div>
                    </div>
                </div>
                <div class="col-md-3">
    <!-- Professional Leaderboard -->

    <div class="leaderboard">
        <h3 class="leaderboard-heading">Top Knolly Students this Month</h3>
        <ul class="leaderboard-list">
        <% var emojis = ['ðŸ¥‡', 'ðŸ¥ˆ', 'ðŸ¥‰']; %>
            <% LEADERBOARD.forEach((student, index) => { %>
                <li class="leaderboard-item">
                    <% if (index < 3) { %>
                        <span class="medal"><%= emojis[index] %></span>
                        <span class="leaderboard-name"><%= student %></span>
                    <% } else {%>
                    <span class="medal"><%= index+1 %></span>
                    <span class="leaderboard-name"><%= student %></span>
                    <%}%>
                </li>
            <% }) %>
        </ul>
    </div>
</div>

                </div>
            </div>
        </div>
    </div>
</section>
  <!-- Scroll Top -->
<a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Preloader -->
<div id="preloader"></div>

<%- include('./partials/footer.ejs') %>
